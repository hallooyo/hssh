
# 启动docker
sh hcmd.sh 'service docker start' '10.176.14.42 10.176.14.53 10.176.14.199 10.176.14.169 10.176.14.190 10.176.14.166 10.176.15.14 10.176.14.191 10.176.14.168 10.176.15.60 10.176.14.167 10.176.14.170 10.176.15.58 10.176.14.192 10.176.15.57 10.176.15.59 10.176.15.64 10.176.15.65 10.176.15.61 10.176.14.3 10.176.15.62 10.176.15.63 10.176.15.66'

# 设置docker开机启动
sh hcmd.sh 'chkconfig docker on' '10.176.14.42 10.176.14.53 10.176.14.199 10.176.14.169 10.176.14.190 10.176.14.166 10.176.15.14 10.176.14.191 10.176.14.168 10.176.15.60 10.176.14.167 10.176.14.170 10.176.15.58 10.176.14.192 10.176.15.57 10.176.15.59 10.176.15.64 10.176.15.65 10.176.15.61 10.176.14.3 10.176.15.62 10.176.15.63 10.176.15.66'

# 结束jenkins slave
sh hcmd.sh 'ps -ef|grep slave.jar | grep -v grep|cut -c 9-15|xargs kill -9' '    10.176.14.42 10.176.14.53 10.176.14.199 10.176.14.169 10.176.14.190 10.176.14.166 10.176.15.14 10.176.14.191 10.176.14.168 10.176.15.60 10.176.14.167 10.176.14.170 10.176.15.58 10.176.14.192 10.176.15.57 10.176.15.59 10.176.15.64 10.176.15.65 10.176.15.61 10.176.14.3 10.176.15.62 10.176.15.63 10.176.15.66'

# 启动jenkins slave
sh hcmd_jenkins.sh '10.176.14.42 10.176.14.53 10.176.14.199 10.176.14.169 10.176.14.190 10.176.14.166 10.176.15.14 10.176.14.191 10.176.14.168 10.176.15.60 10.176.14.167 10.176.14.170 10.176.15.58 10.176.14.192 10.176.15.57 10.176.15.59 10.176.15.64 10.176.15.65 10.176.15.61 10.176.14.3 10.176.15.62 10.176.15.63 10.176.15.66'



sh hcmd.sh 'ps -ef|grep slave.jar | grep -v grep|cut -c 9-15|xargs kill -9' '10.176.14.166 10.176.14.167 10.176.15.66'
sh hcmd_jenkins.sh '10.176.14.166'

sh hcmd_jenkins.sh '10.176.14.190'

sh hcmd.sh 'cat /etc/profile' '10.176.14.166'
sh hcmd.sh 'rm -rf ' '10.176.14.166'


bash -c source /etc/profile && setsid $(find / -name java | grep /export/servers | grep bin/java | head -1)  -jar /export/autoSVN/amp/slave.jar -jnlpUrl http://10.170.223.148:8080/jenkins/computer/10.176.14.190/slave-agent.jnlp -secret 2ec13087565ed256014f009a5433b4832fecd22c0c85ab0b6bc97c17d05dce97 &


## 查询对文件的最近一次访问是在180分钟之前访问的目录 删除
sh hcmd.sh 'echo "*/30 * * * *  root find /export/autoSVN/scriptcase/* -amin +180 -type d | xargs rm -rf" >> /etc/crontab' '10.176.14.199 10.176.14.169 10.176.14.166 10.176.15.14 10.176.14.191 10.176.14.168 10.176.15.60 10.176.14.167 10.176.14.170 10.176.15.58 10.176.14.192 10.176.15.57 10.176.15.59 10.176.15.64 10.176.15.65 10.176.15.61 10.176.14.3 10.176.15.62 10.176.15.63 10.176.15.66'

## 删除/etc/crontab中包含autoSVN的行
sh hcmd.sh 'sed -i '/autoSVN/d' /etc/crontab' '10.176.14.199 10.176.14.169 10.176.14.166 10.176.15.14 10.176.14.191 10.176.14.168 10.176.15.60 10.176.14.167 10.176.14.170 10.176.15.58 10.176.14.192 10.176.15.57 10.176.15.59 10.176.15.64 10.176.15.65 10.176.15.61 10.176.14.3 10.176.15.62 10.176.15.63 10.176.15.66'

## 批量床间文件夹
sh hcmd.sh 'mkdir /export/autoSVN/scriptcase' '10.176.14.199 10.176.14.169 10.176.14.166 10.176.15.14 10.176.14.191 10.176.14.168 10.176.15.60 10.176.14.167 10.176.14.170 10.176.15.58 10.176.14.192 10.176.15.57 10.176.15.59 10.176.15.64 10.176.15.65 10.176.15.61 10.176.14.3 10.176.15.62 10.176.15.63 10.176.15.66'


## 出20分钟之前访问的目录 删除
sh hcmd.sh 'echo "*/5 * * * *  root find /root/.jenkins/jobs/* -amin +120 -type d | xargs rm -rf" >> /etc/crontab' '10.170.223.148'


sh hcmd.sh 'echo "10.182.98.126 test-lop-proxy.jd.com" >> /etc/hosts' '10.176.14.199 10.176.14.169 10.176.14.166 10.176.15.14 10.176.14.191 10.176.14.168 10.176.15.60 10.176.14.167 10.176.14.170 10.176' '10.176.14.199 10.176.14.169 10.176.14.166 10.176.15.14 10.176.14.191 10.176.14.168 10.176.15.60 10.176.14.167 10.176.14.170 10.176.15.58 10.176.14.192 10.176.15.57 10.176.15.59 10.176.15.64 10.176.15.65 10.176.15.61 10.176.14.3 10.176.15.62 10.176.15.63 10.176.15.66'




# 启动jenkins slave --- selena 执行机
sh hcmd_jenkins.sh '11.51.195.71 11.51.195.70 11.51.195.69 11.51.194.218 11.51.195.68'


sh hcmd_jenkins.sh '11.51.195.71 11.51.195.70 11.51.195.69 11.51.194.218 11.51.195.68'



1、安装git
yum install git
2、copy maven
scp -r /export/servers/apache-maven-3.6.3 root@11.51.195.68:/export/servers/apache-maven-3.6.3
3、配置mvn环境变量
vi /etc/profile
export MAVEN_HOME=/export/servers/apache-maven-3.6.3
export PATH=$JAVA_HOME/bin:$MAVEN_HOME/bin:$PATH
4、上传slave.jar
/export/autoSVN/amp
5、启动amp
nohup java -jar /export/autoSVN/amp/slave.jar -jnlpUrl http://10.170.223.148:8080/jenkins/computer/11.51.195.68/slave-agent.jnlp -secret 20562f3d7af6c9d3f1febd27c3d0b1ecd4adf4866310bf5c19336fdf14b03203 &
6、jenkins 添加节点


# 上传并执行脚本
sh jenkins_copy2.sh '11.51.195.71 11.51.195.70 11.51.195.69 11.51.194.218 11.51.195.68' jscript.sh
sh hcmd.sh 'sh /export/jscript.sh hanzhen *Bournewuliu09' '11.51.195.71 11.51.195.70 11.51.195.69 11.51.194.218 11.51.195.68'








